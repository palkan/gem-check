<!DOCTYPE html>
<html>
  <head>
    <title>Gem Check — Writing Better Ruby Gems Checklist</title>
    <meta name="viewport" content="width=device-width">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./main.css">
    <meta itemprop="name" content="Gem Check">
    <meta property="og:title" content="Gem Check">
    <meta name="description" content="Writing Better Ruby Gems Checklist">
    <meta itemprop="description" content="Writing Better Ruby Gems Checklist">
    <meta property="og:description" content="Writing Better Ruby Gems Checklist">
    <meta itemprop="image" content="http://gemcheck.evilmartians.io/images/banner.png">
    <meta property="og:image" content="http://gemcheck.evilmartians.io/images/banner.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@evilmartians">
    <meta name="twitter:creator" content="@evilmartians">
    <meta property="og:site_name" content="Gem Check">
    <meta name="keywords" content="ruby, gems, checklist, open-source">
    <link rel="apple-touch-icon" sizes="180x180" href="./images/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="./images/favicon.ico" sizes="32x32">
    <link rel="icon" type="image/png" href="./images/favicon.ico" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#000000">
  </head>
  <body>
    <script type="text/javascript">
      if (sessionStorage.fontsLoaded) {
        document.documentElement.classList.add('fonts-loaded');
      }
    </script>
    <div class="nav"><a class="nav--btn" href="https://github.com/palkan/gem-check"><span class="nav--btn--icon"><svg width="30" height="30" viewBox="322 444 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M336.999 444c-8.282 0-14.999 6.716-14.999 15 0 6.628 4.298 12.25 10.258 14.233.75.138 1.024-.325 1.024-.723 0-.355-.013-1.3-.02-2.55-4.172.905-5.053-2.012-5.053-2.012-.682-1.733-1.666-2.194-1.666-2.194-1.362-.93.104-.912.104-.912 1.505.106 2.297 1.546 2.297 1.546 1.338 2.292 3.511 1.63 4.366 1.246.136-.968.524-1.63.952-2.004-3.33-.379-6.833-1.666-6.833-7.414 0-1.637.585-2.977 1.545-4.025-.155-.38-.67-1.905.147-3.97 0 0 1.259-.403 4.124 1.538 1.196-.333 2.48-.5 3.755-.506 1.275.007 2.558.173 3.756.506 2.863-1.941 4.12-1.538 4.12-1.538.819 2.065.304 3.59.15 3.97.962 1.048 1.542 2.388 1.542 4.025 0 5.763-3.508 7.03-6.848 7.402.537.463 1.017 1.378 1.017 2.778 0 2.004-.018 3.622-.018 4.114 0 .402.27.868 1.031.722C347.706 471.244 352 465.626 352 459c0-8.284-6.717-15-15.001-15" fill="#ff5e5e" fill-rule="evenodd"/></svg></span><span class="desktop-only">CONTRIBUTE</span></a></div>
    <div class="main">
      <div class="content"><div class="logo">
<svg viewBox="0 0 640 480" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M120 0H40L0 40L34.4896 74.4896L46.5104 62.4688L24.0416 40L47.0416 17H112.958L130.469 34.5104L142.49 22.4896L120 0Z" transform="scale(4)" fill="#F64242"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M50.1681 9.43159V12.1767H56.5L56.5 17.0474H39.4526L39.4526 12.1767H45.7845V9.43158L39.4526 3.09968V0H42.5523L47.9763 5.42403L53.4003 1.07896e-05L56.5 -1.07896e-05L56.5 3.0997L50.1681 9.43159ZM39.4526 19.4828L39.4526 35.556L56.5 35.556L56.5 19.4828L52.1164 19.4828L52.1164 30.6854L43.8362 30.6854L43.8362 19.4828L39.4526 19.4828ZM17.0474 95.9526H0L5.3948e-06 113H17.0474V102.284H12.1767V108.616H4.87069V100.336H17.0474V95.9526ZM36.5302 95.9526L19.4828 95.9526L19.4828 113H36.5302V108.616H24.3535V106.668H36.5302V102.284H24.3535V100.336H36.5302V95.9526ZM38.9655 93.0302V76.9569H43.3491L43.3491 88.1595H51.6293L51.6293 76.9569H56.0129L56.0129 93.0302H38.9655ZM38.9655 74.5215L38.9655 69.6508H45.2974L45.2974 62.3448H38.9655L38.9655 57.4741L56.013 57.4741L56.0129 62.3448H49.681L49.681 69.6508L56.0129 69.6509V74.5215H38.9655ZM39.4526 37.9914L39.4526 55.0388L56.5 55.0388L56.5 37.9914L52.1164 37.9914L52.1164 50.1681L50.1681 50.1681L50.1681 37.9914L45.7845 37.9914L45.7845 50.1681L43.8362 50.1681L43.8362 37.9914L39.4526 37.9914ZM56.0129 113V95.9526H38.9655L38.9655 113H43.8362V100.336H45.2974V113H49.681V100.336L51.1422 100.336L51.1422 113H56.0129Z" transform="translate(481.193 0.799805) scale(4) rotate(45)" fill="#F64242"/>
</svg>
</div>
<div class="moto">
Help developers make other developers happier
</div>
<p>This is the checklist for authors and maintainers of Ruby gems to help them build better open-source software.</p>
<blockquote>
<p>Ruby is designed to make programmers happy. –Matz</p>
</blockquote>
<p>This document is focused <strong>exclusively</strong> on code aspects: API design, architecture, and documentation (because any code is useless without docs). OSS principles already have a good coverage in GitHub’s <a href="https://opensource.guide">open source guide</a>.</p>
<h2>API Design</h2>
<blockquote>
<p>Simple things should be simple, complex things should be possible. –Alan Kay</p>
</blockquote>
<ul>
<li><input type="checkbox" id="checkbox0"><label for="checkbox0">Reduce boilerplate as much as possible</label></li>
</ul>
<p>Compare achieving the same result with <code>Net::HTTP</code> and <a href="https://github.com/jnunemaker/httparty">HTTParty</a>:</p>
<pre><code class="language-ruby"><span class="hljs-comment"># Net::HTTP get JSON with query string</span>
uri = URI(<span class="hljs-string">'http://example.com/index.json'</span>)
params = { <span class="hljs-symbol">limit:</span> <span class="hljs-number">10</span>, <span class="hljs-symbol">page:</span> <span class="hljs-number">3</span> }
uri.query = URI.encode_www_form(params)

res = Net::HTTP.get_response(uri)
puts JSON.parse(res.body) <span class="hljs-keyword">if</span> res.is_a?(Net::HTTPSuccess)

<span class="hljs-comment"># HTTParty</span>
puts HTTParty.get(<span class="hljs-string">'http://example.com/index.json'</span>, <span class="hljs-symbol">limit:</span> <span class="hljs-number">10</span>, <span class="hljs-symbol">page:</span> <span class="hljs-number">3</span>)
</code></pre>
<ul>
<li><input type="checkbox" id="checkbox1"><label for="checkbox1">Do not sacrifice flexibility</label></li>
</ul>
<p>Do not limit the functionality only to simple cases, i.e., allow making intricate things possible.</p>
<p><a href="https://github.com/jnunemaker/httparty">HTTParty</a>, for example, still allows to control underlying HTTP engine fully:</p>
<pre><code class="language-ruby">HTTParty.get(
  <span class="hljs-string">'http://example.com/index.json'</span>,
  { <span class="hljs-symbol">limit:</span> <span class="hljs-number">10</span>, <span class="hljs-symbol">page:</span> <span class="hljs-number">3</span> },
  <span class="hljs-symbol">basic_auth:</span> {},
  <span class="hljs-symbol">headers:</span> {},
  <span class="hljs-symbol">open_timeout:</span> <span class="hljs-number">2</span>,
  <span class="hljs-symbol">read_timeout:</span> <span class="hljs-number">3</span>
)
</code></pre>
<blockquote>
<p>80% of users use only 20% of the functionality.</p>
</blockquote>
<ul>
<li><input type="checkbox" id="checkbox2"><label for="checkbox2">Use sensible defaults</label></li>
</ul>
<p>One common pattern for sensible defaults is the <a href="https://en.wikipedia.org/wiki/Convention_over_configuration">convention over configuration</a>:</p>
<pre><code class="language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Post</span> &lt; ActiveRecord::Base</span>
  <span class="hljs-comment"># in the world with no defaults</span>
  belongs_to <span class="hljs-symbol">:user</span>, <span class="hljs-symbol">foreign_key:</span> <span class="hljs-symbol">:user_id</span>, <span class="hljs-symbol">class_name:</span> <span class="hljs-string">'User'</span>, <span class="hljs-symbol">primary_key:</span> <span class="hljs-symbol">:id</span>
  <span class="hljs-comment"># and with CoC</span>
  belongs_to <span class="hljs-symbol">:user</span>
<span class="hljs-keyword">end</span>
</code></pre>
<blockquote>
<p>Try to walk in the shoes of your users.</p>
</blockquote>
<ul>
<li><input type="checkbox" id="checkbox3"><label for="checkbox3">Follow the </label><a href="https://en.wikipedia.org/wiki/Principle_of_least_astonishment">Principle of least astonishment</a></li>
</ul>
<p>Ruby community is mature, and there are a lot of best practices. The less people think when using your library, the better.</p>
<p>For example, predicate methods (<code>smth?</code>) should return <code>true</code>/<code>false</code> and not something else (e.g., 0/1).
But take a look at this example from Ruby core:</p>
<pre><code class="language-ruby"><span class="hljs-number">1</span>.nonzero?
<span class="hljs-comment"># =&gt; 1</span>
<span class="hljs-number">0</span>.nonzero?
<span class="hljs-comment"># =&gt; nil</span>
<span class="hljs-number">0</span>.zero?
<span class="hljs-comment"># =&gt; true</span>
<span class="hljs-number">1</span>.zero?
<span class="hljs-comment"># =&gt; false</span>
</code></pre>
<p>Confusing, isn’t it?</p>
<p>Consider another example (see this <a href="https://github.com/teachbase/amorail/issues/25">issue</a>):</p>
<pre><code class="language-ruby"><span class="hljs-comment"># Amorail is an API client</span>
Amorail::Lead.find ANY_NONEXISTENT_ID
<span class="hljs-comment"># =&gt; false</span>
<span class="hljs-comment"># why false? we're looking for an object,</span>
<span class="hljs-comment"># nil makes more sense when nothing is found</span>
</code></pre>
<p>Also, check <a href="https://twitter.com/schneems/status/887433898178772996">the story</a> of a confusing <code>retries</code> argument.</p>
<ul>
<li><input type="checkbox" id="checkbox4"><label for="checkbox4">Use keyword arguments if you really need more than N arguments</label></li>
</ul>
<p>Where <em>N</em> is typically equal to 2.</p>
<p>First, kwargs are more readable and do not depend on the order.</p>
<p>Secondly, kwargs <a href="https://github.com/benoittgt/understand_ruby_memory#why-keywords-arguments-will-create-less-garbage-collected-objects-after-22-answered-">allocate less objects</a> compared to <code>options = {}</code> argument.</p>
<p>Example:</p>
<pre><code class="language-ruby"><span class="hljs-comment"># From influxdb-ruby</span>

<span class="hljs-comment"># not-good</span>
influxdb.write_point(data, precision, retention_policy, database)

<span class="hljs-comment"># much better</span>
influxdb.write_point(data, <span class="hljs-symbol">precision:</span> precision, <span class="hljs-symbol">rp:</span> retention, <span class="hljs-symbol">db:</span> database)
</code></pre>
<ul>
<li><input type="checkbox" id="checkbox5"><label for="checkbox5">Raise meaningful/actionable errors</label></li>
</ul>
<p>Always provide error messages: error classes for machines, error messages for humans (check out <a href="https://confreaks.tv/videos/rubyconf2017-human-errors">this talk</a>).</p>
<p>Use <code>ArgumentError</code> if a method is called with wrong or missing arguments.</p>
<p>Provide custom error classes for library’s logic related exceptions:</p>
<pre><code class="language-ruby"><span class="hljs-comment"># https://github.com/influxdata/influxdb-ruby/blob/master/lib/influxdb/client/http.rb</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resolve_error</span><span class="hljs-params">(response)</span></span>
  <span class="hljs-keyword">if</span> response =~ <span class="hljs-regexp">/Couldn\'t find series/</span>
    raise InfluxDB::SeriesNotFound, response
  <span class="hljs-keyword">end</span>
  raise InfluxDB::Error, response
<span class="hljs-keyword">end</span>
</code></pre>
<p>Avoid using negative words (“bad”, “wrong”, etc) in error messages. Use neutral words (“incorrect”, “unexpected”) instead.</p>
<p>When re-raising exceptions, make sure you’re not losing the <em>cause</em>: use <code>raise MyException, &quot;description&quot;</code> instead of <code>raise MyException.new(&quot;description&quot;)</code> (or use <a href="http://engineering.appfolio.com/appfolio-engineering/2017/12/28/ruby-and-nested-exceptions">a <em>secret</em> <code>:cause</code> keyword</a>).</p>
<ul>
<li><input type="checkbox" id="checkbox6"><label for="checkbox6">Monkey-patch reasonably</label></li>
</ul>
<p>Avoid monkey-patching core classes. Consider using <a href="https://ruby-doc.org/core-2.4.1/doc/syntax/refinements_rdoc.html">Refinements</a> instead (see, for example, <a href="https://github.com/amatsuda/database_rewinder/blob/v0.8.2/lib/database_rewinder/cleaner.rb"><code>database_rewinder</code></a>).</p>
<p>Patch other non-core libs using <code>Module#prepend</code> (read this exhaustive <a href="https://stackoverflow.com/a/4471202">StackOverflow answer</a>).</p>
<blockquote>
<p>Make it hard to shoot yourself in the foot.</p>
</blockquote>
<ul>
<li><input type="checkbox" id="checkbox7"><label for="checkbox7">Encourage developers to avoid dangerous behavior</label></li>
</ul>
<p>For example, <a href="https://github.com/seattlerb/minitest">Minitest</a> uses long and shaming method name to disable random order for tests (<code>#i_suck_and_my_tests_are_order_dependent!</code>).</p>
<p>Another great idea is to show flashy warnings. Consider this <a href="https://github.com/mperham/sidekiq">Sidekiq</a> example:</p>
<pre><code class="language-ruby"><span class="hljs-keyword">if</span> <span class="hljs-keyword">defined</span>?(<span class="hljs-symbol">:</span><span class="hljs-symbol">:Rails</span>) &amp;&amp; Rails.respond_to?(<span class="hljs-symbol">:env</span>) &amp;&amp; !Rails.env.test?
  puts(<span class="hljs-string">'**************************************************'</span>)
  puts(<span class="hljs-string">"⛔️ WARNING: Sidekiq testing API enabled,
    but this is not the test environment.
    Your jobs will not go to Redis."</span>)
  puts(<span class="hljs-string">'**************************************************'</span>)
<span class="hljs-keyword">end</span>
</code></pre>
<h2>Codebase</h2>
<blockquote>
<p>Code is written once but read many times.</p>
</blockquote>
<ul>
<li><input type="checkbox" id="checkbox8"><label for="checkbox8">Write code in style</label></li>
</ul>
<p>Your code should have <em>consistent</em> style (i.e. naming, formatting, etc.).
And it would be great to respect the community’s style: take a look at the <a href="https://github.com/bbatsov/ruby-style-guide">Ruby Style Guide</a> or the <a href="https://github.com/testdouble/standard">StandardRB</a> project.</p>
<p>Compare the following two snippets:</p>
<p><span style="display:none;"># rubocop:disable all</span></p>
<pre><code class="language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">some_kinda_fun</span> <span class="hljs-title">a</span>, <span class="hljs-title">even</span> = <span class="hljs-title">false</span></span>
  x = <span class="hljs-keyword">if</span> even <span class="hljs-keyword">then</span> a+<span class="hljs-number">1</span> <span class="hljs-keyword">else</span> a <span class="hljs-keyword">end</span>
  {<span class="hljs-symbol">:x</span> =&gt; a, <span class="hljs-symbol">:y</span> =&gt; x}
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">some_kinda_fun</span><span class="hljs-params">(a, <span class="hljs-symbol">even:</span> <span class="hljs-literal">false</span>)</span></span>
  x = even ? a + <span class="hljs-number">1</span> : a
  { <span class="hljs-symbol">x:</span> a, <span class="hljs-symbol">y:</span> x }
<span class="hljs-keyword">end</span>
</code></pre>
<p><span style="display:none;"># rubocop:enable all</span></p>
<p>Which one is more readable?</p>
<ul>
<li><input type="checkbox" id="checkbox9"><label for="checkbox9">Cover code with tests</label></li>
</ul>
<p>Coverage makes sense for libraries.</p>
<p>But readable test cases make even more sense, especially in integration scenarios (because such tests can be used as documentation).</p>
<h2>Architecture</h2>
<blockquote>
<p>Write code for others, not for yourself.</p>
</blockquote>
<ul>
<li><input type="checkbox" id="checkbox10"><label for="checkbox10">Adapterize third-party dependencies</label></li>
</ul>
<p>For example, <a href="http://edgeguides.rubyonrails.org/active_job_basics.html">Active Job</a> is a great abstraction for background jobs: it supports different adapters, and it’s easy to build your own.</p>
<p>On the other hand, <a href="http://edgeguides.rubyonrails.org/action_cable_overview.html">Action Cable</a> code is tightly coupled with its server implementation. That makes other WebSocket servers impossible to use without a fair amount of monkey-patching (at least, unless <a href="https://github.com/rails/rails/pull/27648">some refactoring</a> is done).</p>
<p>Whenever you write a library for a particular database, framework, or something else, think beforehand if it is going to work with alternatives.</p>
<ul>
<li><input type="checkbox" id="checkbox11"><label for="checkbox11">Keep extensibility in mind</label></li>
</ul>
<p>There are different ways to build extensible libraries, e.g., by providing <em>middleware</em> (like <a href="https://github.com/rack/rack">Rack</a>, <a href="https://github.com/lostisland/faraday">Faraday</a> and <a href="https://github.com/mperham/sidekiq">Sidekiq</a>)
or <em>plugin</em> (like <a href="https://github.com/janko-m/shrine">Shrine</a> and <a href="https://github.com/plataformatec/devise">Devise</a>) functionality.</p>
<p>The key idea here is to provide an ability to extend functionality by avoiding patching or high coupling.</p>
<ul>
<li><input type="checkbox" id="checkbox12"><label for="checkbox12">Provide logging functionality (when necessary)</label></li>
</ul>
<p>Logging helps people to identify problems but should be <em>controllable</em> (severity levels, custom outputs, (possibly) filtering).</p>
<p>The easiest way to provide flexible logging is to allow users to specify the Logger instance themselves:</p>
<pre><code class="language-ruby">GemCheck.logger = Logger.new(STDOUT)
</code></pre>
<p>Avoid <code>puts</code> logging.</p>
<ul>
<li><input type="checkbox" id="checkbox13"><label for="checkbox13">Make code testable</label></li>
</ul>
<p>Help developers to easily test the code that uses your library: provide custom matchers (like <a href="https://github.com/elabs/pundit#rspec">Pundit</a>), testing adapters (like <a href="http://edgeguides.rubyonrails.org/active_job_basics.html#job-testing">Active Job</a>), or mocks (like <a href="https://github.com/fog/fog#mocks">Fog</a>).</p>
<p>Ensure your code can be configured to be less computational-heavy in tests, like <a href="https://github.com/plataformatec/devise">Devise</a> does:</p>
<pre><code class="language-ruby">Devise.setup <span class="hljs-keyword">do</span> <span class="hljs-params">|config|</span>
  config.stretches = Rails.env.test? ? <span class="hljs-number">1</span> : <span class="hljs-number">11</span>
<span class="hljs-keyword">end</span>
</code></pre>
<ul>
<li><input type="checkbox" id="checkbox14"><label for="checkbox14">Make configuration flexible</label></li>
</ul>
<p>Provide different ways to configure your library: <em>manually</em> through the code, from YAML files, or from environmental variables.
See, for example, <a href="https://github.com/aws/aws-sdk-ruby#configuration"><code>aws-sdk</code></a>.</p>
<p>Integration libraries <strong>must</strong> support <a href="https://12factor.net"><em>twelve-factor-able</em></a> configuration. You can use <a href="https://github.com/palkan/anyway_config">anyway_config</a> to accomplish this.</p>
<p>Use sensible defaults for configuration (e.g., for Redis connection it’s good to use <code>localhost:6379</code> by default) and environment variables names (e.g., <code>REDIS_URL</code> for Redis, like <a href="https://github.com/mperham/sidekiq/blob/v5.0.0/lib/sidekiq/redis_connection.rb#L100-L102">Sidekiq</a> does).</p>
<ul>
<li><input type="checkbox" id="checkbox15"><label for="checkbox15">Manage runtime dependencies carefully</label></li>
</ul>
<p>More dependencies–more chances for failure, harder upgrades.</p>
<p>You don’t need the whole <code>rails</code> if you’re only using <code>active_model</code>.
You don’t need the whole <code>active_support</code> if you only need a couple of patches (consider using ad-hoc refinements instead).</p>
<p>Do not add library that is only used in some use cases as a dependency (e.g., Rails does not add <code>redis</code> as a default dependency, it only suggests that you may add it yourself).</p>
<p>Monitor your dependencies for CVE (see <a href="https://github.com/rubysec/bundler-audit">bundler-audit</a>) or let <a href="https://dependencyci.com">DependencyCI</a> do all the work for you.</p>
<ul>
<li><input type="checkbox" id="checkbox16"><label for="checkbox16">Provide interoperability (if it is possible)</label></li>
</ul>
<p>There is more than one major <a href="https://en.wikipedia.org/wiki/Ruby_(programming_language)#Alternate_implementations">Ruby implementation</a>, and at least three popular: MRI, <a href="http://jruby.org">JRuby</a> and <a href="https://rubinius.com">Rubinius</a> (and <a href="https://github.com/graalvm/truffleruby">TruffleRuby</a> is coming). The fact that MRI is much more popular than others does not mean you should ditch the rest.</p>
<p><a href="https://github.com/ruby-concurrency/concurrent-ruby">Concurrent Ruby</a> is an excellent example of interoperability.</p>
<p>You should at least provide the information whether other platforms are supported or not (just add them to your CI and check–that’s easy!).</p>
<h2>Documents</h2>
<blockquote>
<p>A program is only as good as its documentation. –Joe Armstrong</p>
</blockquote>
<ul>
<li><input type="checkbox" id="checkbox17"><label for="checkbox17">Provide at least one form of documentation</label></li>
</ul>
<p>It is not always necessary to write a book, or even RDocs: <em>well-written</em> Readme could be sufficient (see <a href="https://github.com/matiassingers/awesome-readme">awesome-readme</a> for examples).</p>
<p><em>Provide benchmarks</em> in any form if your library is more performant than others (at least, tell users how much memory/CPU/time can be saved with your solution).</p>
<ul>
<li><input type="checkbox" id="checkbox18"><label for="checkbox18">Write docs in style</label></li>
</ul>
<p>Your documentation contains a lot of code examples? Make sure their have correct syntax and consistent style.
For example, for Ruby snippets you can use <a href="https://github.com/palkan/rubocop-md"><code>rubocop-md</code></a>.</p>
<p>And don’t forget about the language! We use <a href="https://github.com/ai/yaspeller-ci">yaspeller-ci</a> for that.</p>
<ul>
<li><input type="checkbox" id="checkbox19"><label for="checkbox19">Provide examples for both simple and complex scenarios</label></li>
</ul>
<p>A good example is much better than documentation.</p>
<p>Provide code snippets, Wiki pages for specific scenarios–just show people how you are using your own code!</p>
<ul>
<li><input type="checkbox" id="checkbox20"><label for="checkbox20">Explain how you wrote the code</label></li>
</ul>
<p>There are several reasons for that: sharing knowledge and helping others to contribute and debug potential problems easily.</p>
<p>See this great example from <a href="https://github.com/rbspy/rbspy/blob/master/ARCHITECTURE.md">rbspy</a>.</p>
<ul>
<li><input type="checkbox" id="checkbox21"><label for="checkbox21">Show the current state of the project</label></li>
</ul>
<p>It should be clear to users what is the current state of the project and which versions of software (the language itself, dependencies) are supported (you can use badges in your Readme).</p>
<ul>
<li><input type="checkbox" id="checkbox22"><label for="checkbox22">Use semantic versioning</label></li>
</ul>
<p>Help your users to easily upgrade without thinking about breaking changes. For example, you can follow <a href="http://semver.org">SemVer</a> rules, or use your own <em>semantics</em> (just don’t forget to explain it to your users).</p>
<ul>
<li><input type="checkbox" id="checkbox23"><label for="checkbox23">Use deprecation messages prior to introducing breaking changes</label></li>
</ul>
<p>See, for example, how <a href="https://github.com/rails/rails/blob/v5.2.0.beta2/railties/lib/rails/commands/server/server_command.rb#L29">Rails</a> do that.</p>
<ul>
<li><input type="checkbox" id="checkbox24"><label for="checkbox24">Keep a changelog</label></li>
</ul>
<p>Wondering why? Just read the <a href="http://keepachangelog.com/">keepchangelog.com</a>.</p>
<p>Looking for an automation? Take a look at <a href="https://github.com/skywinder/github-changelog-generator"><code>github-changelog-generator</code></a> and <a href="https://github.com/egoist/loglive"><code>loglive</code></a>.</p>
<p>Your commits history is also a kind of changelog, so, use meaningful messages (<a href="https://github.com/bkuhlmann/git-cop"><code>git-cop</code></a> can help you with it).</p>
<p>Keeping release notes (e.g. through <a href="https://help.github.com/articles/creating-releases/">GitHub Releases</a>) is also a good idea. You can automate release notes generation with <a href="https://github.com/toolmantim/release-drafter">Release Drafter</a>.</p>
<ul>
<li><input type="checkbox" id="checkbox25"><label for="checkbox25">Provide upgrade notes</label></li>
</ul>
<p>Make the process of upgrading less painful.</p>
<p>See, for example, <a href="http://hanamirb.org/guides/1.1/upgrade-notes/v100/">Hanami</a>.</p>
<p>Or even better–provide a migration script! Like <code>graphql-ruby</code> <a href="http://graphql-ruby.org/schema/class_based_api.html#upgrader">did</a>.</p>
<h2>Misc</h2>
<blockquote>
<p>OSS that stops evolution gradually dies. –Matz</p>
</blockquote>
<ul>
<li><input type="checkbox" id="checkbox26"><label for="checkbox26">Keep code up to date with related technologies</label></li>
</ul>
<p>Try to prevent compatibility issues by monitoring dependencies upgrades (<a href="https://depfu.io">Depfu</a> or <a href="https://dependabot.com">Dependabot</a> could help here).</p>
<p>Run your tests against <code>ruby-head</code>, Rails <code>master</code>, whatever–just add it to your CI, it’s easy!</p>
<ul>
<li><input type="checkbox" id="checkbox27"><label for="checkbox27">Make development process less painful</label></li>
</ul>
<p>Sooner or later people will try to contribute to your work. Is your development process transparent, or does it require a lot of effort to setup?</p>
<p>For example, Rails has a <a href="https://github.com/rails/rails-dev-box"><code>rails-dev-box</code></a> to help you start developing easily.</p>
<p><a href="https://www.docker.com">Docker</a> is also a good way to make dependency management simpler.</p>
<ul>
<li><input type="checkbox" id="checkbox28"><label for="checkbox28">Update your version on RubyGems in time</label></li>
</ul>
<p>Keep version of a gem at <a href="https://rubygems.org/">RubyGems</a> up-to-date with your main repository releases.</p>
<p>When should I bump a version?</p>
<div class="nested-list">
<ul>
<li>Security fix</li>
<li>Fixing a regression bug (like <a href="https://www.ruby-lang.org/en/news/2016/11/21/ruby-2-3-3-released/">Ruby 2.3.3</a>)</li>
<li>Adding a feature – wait for next planned release</li>
<li>Fixing a bug that was there for a long time – wait for next planned release</li>
</ul>
</div>
<p>It’s a good practice to publish RC/beta versions prior to releasing a major update.</p>
<p>You can automate your release process by using, for example, <a href="https://github.com/bkuhlmann/gemsmith"><code>gemsmith</code></a> / <a href="https://github.com/svenfuchs/gem-release"><code>gem-release</code></a> or CI services (e.g. <a href="https://docs.travis-ci.com/user/deployment/rubygems/">Travis supports</a> RubyGems deployments).</p>
<ul>
<li><input type="checkbox" id="checkbox29"><label for="checkbox29">Don’t let your gem bloat</label></li>
</ul>
<p>While it makes a great sense to add to your repository as more documentation and examples as possible, have a huge test suite and development
guides, it’s better not to include this unrelated data to the final package. Be reasonable about your gem content.
The only essential parts, in the most cases, are basic README, license information, and the source code itself.</p>
<p>Whitelisting gem content protects you from occasional and undesirable “additions” in the future.</p>
<pre><code class="language-ruby">Gem::Specification.new <span class="hljs-keyword">do</span> <span class="hljs-params">|spec|</span>
  <span class="hljs-comment"># ...</span>
  spec.files =  Dir.glob(<span class="hljs-string">"lib/**/*"</span>) + Dir.glob(<span class="hljs-string">"bin/**/*"</span>) + <span class="hljs-string">%w[README.md LICENSE.txt CHANGELOG.md]</span>
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>
</code></pre>

      </div>
    </div>
    <script src="./js/app.min.js" type="text/javascript"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-104346673-1', 'auto');
  ga('send', 'pageview');
</script>

    <script src="./vendor/likely.js" async type="text/javascript"></script>
    <div class="social-icons">
      <div class="likely">
        <div class="twitter" data-via="palkan_tula">Tweet</div>
      </div>
    </div>
    <div class="footer">
      <div class="footer--block legals">
        <p><span class="copyright">2017-2019 </span><a href="https://twitter.com/palkan_tula">Vladimir Dementyev</a> & <a href="https://evilmartians.com">Evil Martians</a></p>
        <div class="footer--humanoids">
          <div class="humanoids">
            <div class="humanoids__martian"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 108 92"><path fill="#f64242" d="M26 88L8 78l18-10"/><path fill="#f64242" d="M94 92v-6H44c-5.5 0-10-4.5-10-10s4.5-10 10-10h50V32c0-14-7.9-22-22-22H48c-14.1 0-22 8-22 22v60h68z"/><circle fill="#FFF" cx="48" cy="50" r="8"/><circle fill="#FFF" cx="72" cy="50" r="8"/><circle fill="#BF6C35" cx="48" cy="50" r="4"/><circle fill="#BF6C35" cx="72" cy="50" r="4"/><g fill="#663F4C"><path d="M48 60c-5.5 0-10-4.5-10-10s4.5-10 10-10 10 4.5 10 10-4.5 10-10 10zm0-16c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zM82 50c0 5.5-4.5 10-10 10s-10-4.5-10-10 4.5-10 10-10 10 4.5 10 10zm-16 0c0 3.3 2.7 6 6 6s6-2.7 6-6-2.7-6-6-6-6 2.7-6 6z"/><path d="M102 8c-3.8 0-6-2.2-6-6 0-1.1-.9-2-2-2s-2 .9-2 2c0 2.2.5 4.1 1.5 5.7L88.2 13c-4-3.3-9.5-5-16.2-5H48c-6.7 0-12.2 1.7-16.2 4.9l-5.3-5.3C27.5 6.1 28 4.2 28 2c0-1.1-.9-2-2-2s-2 .9-2 2c0 3.8-2.2 6-6 6-1.1 0-2 .9-2 2s.9 2 2 2c2.2 0 4.1-.5 5.7-1.5l5.3 5.3c-3.2 4-4.9 9.5-4.9 16.2v34.8L3.9 78 24 89v3h4V32c0-12.9 7.1-20 20-20h24c12.9 0 20 7.1 20 20v32H44c-6.6 0-12 5.4-12 12s5.4 12 12 12h48v4h4v-8h-2l-4-8-4 8h-4l-4-8-4 8h-4l-4-8-4 8h-4l-4-8-4 8h-4l-4-8-3.1 6.2C37.1 80.7 36 78.5 36 76c0-4.4 3.6-8 8-8l4 8 4-8h4l4 8 4-8h4l4 8 4-8h4l4 8 4-8h8V32c0-6.7-1.7-12.2-4.9-16.2l5.3-5.3c1.6 1 3.5 1.5 5.7 1.5 1.1 0 2-.9 2-2s-1-2-2.1-2zM24 84.4L12.1 78 24 71.4v13z"/></g></svg></div>
            <div class="humanoids__human"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 108 92"><path fill="#FFFFFF" d="M14 62v30h68v-6H32c-5.5 0-10-4.5-10-10s4.5-10 10-10h50v-4c4 0 8-3.6 8-8s-4-8-8-8V32c0-14-7.9-22-22-22H36c-14.1 0-22 8-22 22v14c-4 0-8 3.6-8 8s4 8 8 8z"/><circle fill="#FFF" cx="36" cy="50" r="8"/><circle fill="#FFF" cx="60" cy="50" r="8"/><circle fill="#f64242" cx="36" cy="50" r="4"/><circle fill="#f64242" cx="60" cy="50" r="4"/><path fill="#f64242" d="M60 10H36c-14.1 0-22 8-22 22v2l4-4 6 6 6-6 6 6 6-6 6 6 6-6 6 6 6-6 6 6 6-6 4 4v-2c0-14-7.9-22-22-22z"/><g fill="#663F4C"><path d="M36 60c-5.5 0-10-4.5-10-10s4.5-10 10-10 10 4.5 10 10-4.5 10-10 10zm0-16c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zM60 60c-5.5 0-10-4.5-10-10s4.5-10 10-10 10 4.5 10 10-4.5 10-10 10zm0-16c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6z"/><path d="M12 63.8V92h4V32c0-12.9 7.1-20 20-20h24c12.9 0 20 7.1 20 20v32H32c-6.6 0-12 5.4-12 12s5.4 12 12 12h48v4h4v-8H74v-1c0-1.7-1.3-3-3-3s-3 1.3-3 3v1h-6v-1c0-1.7-1.3-3-3-3s-3 1.3-3 3v1h-6v-1c0-1.7-1.3-3-3-3s-3 1.3-3 3v1h-6v-1c0-1.7-1.3-3-3-3s-3 1.3-3 3v1c-4 0-8-3.6-8-8s3.6-8 8-8h6v1c0 1.7 1.3 3 3 3s3-1.3 3-3v-1h6v1c0 1.7 1.3 3 3 3s3-1.3 3-3v-1h6v1c0 1.7 1.3 3 3 3s3-1.3 3-3v-1h6v1c0 1.7 1.3 3 3 3s3-1.3 3-3v-1h4v-4.2c5-.9 8-5 8-9.8s-3-8.9-8-9.8V32c0-15.3-8.7-24-24-24H36c-15.3 0-24 8.7-24 24v12.2c-5 .9-8 5-8 9.8s3 8.9 8 9.8zm72-15.5c2 .8 4 3 4 5.7s-2 4.8-4 5.7V48.3zm-72 0v11.3c-2-.8-4-3-4-5.7s2-4.7 4-5.6z"/></g></svg></div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>